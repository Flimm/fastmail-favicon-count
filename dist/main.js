!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function a(e,t,n){const a=[],r=e<t,o=n?r?t+1:t-1:t;for(let t=e;r?t<o:t>o;r?t++:t--)a.push(t);return a}n.r(t);const r={0:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],1:[[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,1,1,1,0,0,0],[0,1,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1]],2:[[0,1,1,1,1,0,0,0],[1,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1]],3:[[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0]],4:[[0,0,0,0,0,1,0,0],[0,0,0,0,1,1,0,0],[0,0,0,1,0,1,0,0],[0,0,1,0,0,1,0,0],[0,1,0,0,0,1,0,0],[1,0,0,0,0,1,0,0],[1,0,0,0,0,1,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0]],5:[[0,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[1,0,0,0,0,0,1,0],[0,1,1,1,1,1,0,0]],6:[[0,0,0,1,1,1,1,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,1,1,1,1,0,0],[1,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],7:[[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0]],8:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]],9:[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,1],[0,0,1,1,1,1,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,1,1,1,1,0,0,0]],"+":[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,1,1,1,1,1,1,1],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},o={init(){const e=document.getElementById("favicon");this.faviconImage=e?e.getAttribute("href"):"https://dropbox.michaelgeraci.com/public/fastmail/fastmail-icon.png",[this.head]=document.getElementsByTagName("head"),this.timer=setInterval(()=>{this.poll()},1e3),this.poll()},poll(){const e=this.getUnreadCount();e>=0?this.getUnreadCountIcon(e,e=>{this.setIcon(e)}):this.getIcon(e=>{this.setIcon(e)})},getUnreadCount(){let e=0;const t=document.querySelectorAll(".v-MailboxSource"),n=["Drafts","Trash"];return t.forEach(t=>{const a=t.querySelector(".app-source-name").innerHTML,r=t.querySelector(".v-MailboxSource-badge")&&parseInt(t.querySelector(".v-MailboxSource-badge").innerHTML,10)||0;n.indexOf(a)<0&&(e+=r)}),e},drawUnreadCount(e,t){const n=e>99?"99+":e,a=String(n).length;this.textedCanvas||(this.textedCanvas={}),this.textedCanvas[n]||this.getUnreadCanvas(e=>{const o=document.createElement("canvas");o.height=e.width,o.width=e.width;const i=o.getContext("2d");i.drawImage(e,0,0),i.strokeStyle="rgba(255, 255, 255, 0.6)",i.fillStyle="#000";const s=.0625*e.width,c=e.height-r[0].length-s,d=r[0][0].length*a+2*(a-1);let u=e.width-d-1;u<0&&(u=0),this.drawNumber({digits:a,unreadCount:n,fn:(e,t)=>{i.strokeRect(e+u-2,t+c-2,6,6)}}),this.drawNumber({digits:a,unreadCount:n,fn:(e,t)=>{i.fillRect(e+u,t+c,2,2)}}),this.textedCanvas[n]=o,t(this.textedCanvas[n])}),this.textedCanvas[n]&&t(this.textedCanvas[n])},drawNumber({digits:e,unreadCount:t,fn:n}){let o,i,s,c,d=0;a(0,e).forEach((e,u)=>{o=String(t)[u],r[o]&&(s=(i=r[o]).length,c=i[0].length,d=c*u+2*u,a(0,s).forEach(e=>{a(0,c).forEach(t=>{i[e][t]&&n(t+d,e)})}))})},getIcon(e){this.getUnreadCanvas(t=>{e(t.toDataURL("image/png"))})},getUnreadCanvas(e){if(this.unreadCanvas)e(this.unreadCanvas);else{this.unreadCanvas=document.createElement("canvas");const t=this.unreadCanvas.getContext("2d"),n=new Image;n.crossOrigin="anonymous",n.addEventListener("load",()=>{this.unreadCanvas.width=n.width,this.unreadCanvas.height=n.height,t.drawImage(n,0,0),e(this.unreadCanvas)},!0),n.src=this.faviconImage}},getUnreadCountIcon(e,t){this.drawUnreadCount(e,e=>{t(e.toDataURL("image/png"))})},setIcon(e){const t=this.head.getElementsByTagName("link");[].slice.call(t).forEach(e=>{"shortcut icon"!==e.rel&&"icon"!==e.rel||this.head.removeChild(e)});const n=document.createElement("link");n.type="image/png",n.rel="shortcut icon",n.href=e,this.head.appendChild(n);const a=document.createElement("iframe");a.width=0,a.height=0,document.body.appendChild(a),a.src="icon",document.body.removeChild(a)}};setTimeout(()=>{o.init()},500)}]);